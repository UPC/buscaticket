<!doctype html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Load c3.css -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" type="text/css">

<!-- Load d3.js and c3.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.9/d3.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
</head>
<body>
   <div class="container">

      <div class="header clearfix">        
        <h1><span class="glyphicon glyphicon-search"></span> Buscaticket</h1>
      </div>

  <div class="jumbotron">              
        <form>
			<div class="input-group input-group-lg">
  				<input type="text" class="form-control" name="q" placeholder="Busca el que vulguis..." value="{{q}}">
    			<span class="input-group-btn">
        			<button class="btn btn-default" type="button">Busca tickets!</button>
      			</span>  				
  			</div>
		</form>

		<div id="chart"></div>
		<script>
    var chart = c3.generate({
        bindto: '#chart',
        data: {
          url:'/oberts-diaris',
          mimeType: 'json',
          x:'dia',
          rows: [
          ['dia','obrim','tanquem','oberts']
              ],
          types: {
            obrim: 'bar',
            tanquem: 'bar',
            oberts: 'area'
            }
        },
        bar : {
          width: 4
        },
        axis: {
            x: {
              type: 'timeseries',
              min: '2015-9-1',
              tick: {
                  format: '%Y-%m-%d'
              }
              }
            }
    });    
    /*
		var chart = c3.generate({
		    bindto: '#chart',
		    data: {
		      url:'/oberts-diaris',
		      mimeType: 'json',
		      x:'mes',
		      rows: [
  				['mes','obrim','tanquem','oberts']
              ],
		      types: {
        		obrim: 'bar',
        		tanquem: 'bar',
        		oberts: 'area'
      		  }
		    },
		    axis: {
        	  x: {
            	type: 'timeseries',
            	tick: {
              	  format: '%Y-%m'
            	}
              }
            }
		});
*/
		</script>
      </div>
<h3>Resultats: {{resultats|count}}</h3>
{% for resultat in resultats %}
<h4><a href="https://gn6.upc.edu/tiquets/control/tiquetDetallDadesGenerals?requirementId={{resultat.codiTiquet}}"/>{{resultat.assumpte}}</a></h4>
  <b>{{resultat.dadesContacteSolicitant if resultat.dadesContacteSolicitant != 'None'}} 
  {{resultat.solicitantNom if resultat.solicitantNom != 'None'}}</b>
  {% if resultat.dataTancament %} <span class="label label-success">Tancat</span> {{resultat.dataTancament}} 
  {% else %}
  {% if resultat.dataCreacio %} <span class="label label-danger">Obert</span> {{resultat.dataCreacio}} {% endif %}
  {% endif %}
  <p>{{resultat.descripcio|striptags|truncate(250,True)}}</p>
{% endfor %}
</div>
</body>
</html>
